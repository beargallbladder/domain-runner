const { Pool } = require('pg'); const fs = require('fs'); const path = require('path'); const pool = new Pool({ connectionString: process.env.DATABASE_URL, ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false }); const schema = fs.readFileSync(path.join(__dirname, '..', 'schemas', 'schema.sql'), 'utf8'); pool.query(schema).then(() => { console.log('Schema initialized'); pool.end(); }).catch(err => { console.error('Schema error:', err); process.exit(1); });
