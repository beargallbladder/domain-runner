{
  "timestamp": "2025-07-29T09:29:19.708059",
  "api_url": "https://llm-pagerank-public-api.onrender.com",
  "summary": {
    "total_tests": 12,
    "passed": 4,
    "failed": 2,
    "warnings": 5,
    "pass_rate": 33.33333333333333
  },
  "security_checks": {
    "API Key Authentication": false,
    "Rate Limiting": false,
    "Request Logging": false,
    "Error Handling": false,
    "Data Freshness": false
  },
  "test_results": [
    {
      "name": "API Key Authentication - Valid Key",
      "status": "PASSED",
      "message": "Test completed successfully",
      "duration_ms": 458.6460590362549,
      "details": null
    },
    {
      "name": "API Key Authentication - Invalid Key",
      "status": "FAILED",
      "message": "Invalid API key was accepted!",
      "duration_ms": 206.8002223968506,
      "details": {
        "critical": true
      }
    },
    {
      "name": "API Key Authentication - Missing Key",
      "status": "WARNING",
      "message": "Public endpoint allows access without API key",
      "duration_ms": 144.56772804260254,
      "details": {
        "endpoint": "/api/domains/*/public"
      }
    },
    {
      "name": "Rate Limiting - Enforcement",
      "status": "WARNING",
      "message": "No rate limiting after 150 requests",
      "duration_ms": 25934.984922409058,
      "details": {
        "requests_made": 150
      }
    },
    {
      "name": "Rate Limiting - Headers",
      "status": "WARNING",
      "message": "No rate limit headers found",
      "duration_ms": 166.3222312927246,
      "details": {
        "all_headers": [
          "Date",
          "Content-Type",
          "Transfer-Encoding",
          "Connection",
          "rndr-id",
          "Vary",
          "x-render-origin-server",
          "cf-cache-status",
          "Server",
          "CF-RAY",
          "Content-Encoding",
          "alt-svc"
        ]
      }
    },
    {
      "name": "Request Logging",
      "status": "PASSED",
      "message": "Request completed (logging assumed)",
      "duration_ms": 471.5569019317627,
      "details": {
        "request_id": "test_1753806554",
        "note": "Check server logs for verification"
      }
    },
    {
      "name": "Data Freshness",
      "status": "FAILED",
      "message": "Data is stale (492.2 hours old)",
      "duration_ms": 311.39087677001953,
      "details": {
        "last_updated": "2025-07-09T04:19:55.959143Z"
      }
    },
    {
      "name": "Public Endpoints",
      "status": "PASSED",
      "message": "All 5 endpoints working",
      "duration_ms": 948.8561153411865,
      "details": {
        "endpoints": [
          {
            "endpoint": "/",
            "description": "Homepage",
            "status": "OK",
            "content_type": "application/json"
          },
          {
            "endpoint": "/health",
            "description": "Health check",
            "status": "OK",
            "content_type": "application/json"
          },
          {
            "endpoint": "/api/stats",
            "description": "Platform statistics",
            "status": "OK",
            "content_type": "application/json"
          },
          {
            "endpoint": "/api/rankings",
            "description": "Domain rankings",
            "status": "OK",
            "content_type": "application/json"
          },
          {
            "endpoint": "/api/domains/apple.com/public",
            "description": "Domain intelligence",
            "status": "OK",
            "content_type": "application/json"
          }
        ]
      }
    },
    {
      "name": "Error Handling",
      "status": "WARNING",
      "message": "Some error cases not handled properly",
      "duration_ms": 355.6537628173828,
      "details": {
        "results": [
          {
            "endpoint": "/api/domains/nonexistent.fake/public",
            "expected_status": 404,
            "actual_status": 404,
            "status_match": true,
            "has_error_message": true,
            "body": "{\"detail\":\"Domain 'nonexistent.fake' not found\"}"
          },
          {
            "endpoint": "/api/invalid/endpoint",
            "expected_status": 404,
            "actual_status": 404,
            "status_match": true,
            "has_error_message": true,
            "body": "{\"detail\":\"Not Found\"}"
          },
          {
            "endpoint": "/api/rankings?page=-1",
            "expected_status": 400,
            "actual_status": 422,
            "status_match": false,
            "has_error_message": true,
            "body": "{\"detail\":[{\"type\":\"greater_than_equal\",\"loc\":[\"query\",\"page\"],\"msg\":\"Input should be greater than or equal to 1\",\"input\":\"-1\",\"ctx\":{\"ge\":1},\"url\":\"https://errors.pydantic.dev/2.11/v/greater_than_equ"
          }
        ]
      }
    },
    {
      "name": "Performance",
      "status": "PASSED",
      "message": "All endpoints respond quickly",
      "duration_ms": 2502.1960735321045,
      "details": {
        "performance": [
          {
            "endpoint": "/health",
            "avg_ms": 158.7,
            "max_ms": 178.6,
            "samples": 5
          },
          {
            "endpoint": "/api/stats",
            "avg_ms": 147.1,
            "max_ms": 166.3,
            "samples": 5
          },
          {
            "endpoint": "/api/rankings?limit=10",
            "avg_ms": 194.7,
            "max_ms": 277.4,
            "samples": 5
          }
        ]
      }
    },
    {
      "name": "User Registration",
      "status": "WARNING",
      "message": "Auth endpoints not yet deployed",
      "duration_ms": 88.69194984436035,
      "details": {
        "endpoint": "/api/auth/register"
      }
    },
    {
      "name": "User Login",
      "status": "SKIPPED",
      "message": "Cannot test login - registration not working",
      "duration_ms": 80.04999160766602,
      "details": {
        "registration_status": 404
      }
    }
  ]
}