<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMRank.io - Time Tensor Visualizations</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #0a0a0a;
            color: #fff;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1, h2 {
            color: #00ff88;
            text-align: center;
        }
        .viz-section {
            margin: 40px 0;
            padding: 20px;
            background: #1a1a1a;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,255,136,0.1);
        }
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        label {
            color: #00ff88;
            font-size: 14px;
        }
        input[type="range"] {
            width: 200px;
        }
        select, button {
            padding: 8px 16px;
            background: #2a2a2a;
            color: #00ff88;
            border: 1px solid #00ff88;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #00ff88;
            color: #0a0a0a;
        }
        #memory-decay-viz, #consensus-heatmap, #tensor-3d {
            width: 100%;
            height: 500px;
            background: #0a0a0a;
            border-radius: 10px;
            overflow: hidden;
        }
        .metric-card {
            display: inline-block;
            padding: 10px 20px;
            margin: 10px;
            background: #2a2a2a;
            border-radius: 5px;
            border: 1px solid #00ff88;
        }
        .metric-value {
            font-size: 24px;
            font-weight: bold;
            color: #00ff88;
        }
        .legend {
            display: flex;
            gap: 20px;
            margin-top: 10px;
            font-size: 14px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .legend-color {
            width: 20px;
            height: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ§  LLMRank.io Time Tensor Visualizations</h1>
        <p style="text-align: center; color: #888;">Interactive Mathematical Framework Demonstration</p>

        <!-- Memory Decay Visualization -->
        <div class="viz-section">
            <h2>Memory Decay Curves</h2>
            <div class="controls">
                <div class="control-group">
                    <label>Initial Memory Score</label>
                    <input type="range" id="initial-score" min="0" max="100" value="85">
                    <span id="initial-score-value">85</span>
                </div>
                <div class="control-group">
                    <label>Decay Type</label>
                    <select id="decay-type">
                        <option value="exponential">Exponential</option>
                        <option value="multi-exponential">Multi-Exponential</option>
                        <option value="power-law">Power Law</option>
                    </select>
                </div>
                <button onclick="updateDecayCurve()">Update</button>
            </div>
            <div id="memory-decay-viz"></div>
            <div class="legend">
                <div class="legend-item">
                    <div class="legend-color" style="background: #ff6b6b;"></div>
                    <span>Viral (24h half-life)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #4ecdc4;"></div>
                    <span>News (7d half-life)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #45b7d1;"></div>
                    <span>Brand (90d half-life)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: #96ceb4;"></div>
                    <span>Reputation (1y half-life)</span>
                </div>
            </div>
        </div>

        <!-- LLM Consensus Heatmap -->
        <div class="viz-section">
            <h2>LLM Consensus Matrix</h2>
            <div class="controls">
                <div class="control-group">
                    <label>Domain</label>
                    <select id="domain-select">
                        <option value="tesla.com">Tesla</option>
                        <option value="openai.com">OpenAI</option>
                        <option value="google.com">Google</option>
                        <option value="apple.com">Apple</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Time Window</label>
                    <select id="time-window">
                        <option value="24h">Last 24 Hours</option>
                        <option value="7d">Last 7 Days</option>
                        <option value="30d">Last 30 Days</option>
                    </select>
                </div>
                <button onclick="updateConsensusMatrix()">Update</button>
            </div>
            <div id="consensus-heatmap"></div>
            <div class="metric-card">
                <div>Overall Consensus</div>
                <div class="metric-value" id="consensus-score">0.00</div>
            </div>
            <div class="metric-card">
                <div>Agreement Level</div>
                <div class="metric-value" id="agreement-level">-</div>
            </div>
        </div>

        <!-- 3D Time Tensor -->
        <div class="viz-section">
            <h2>3D Brand Perception Tensor</h2>
            <div class="controls">
                <div class="control-group">
                    <label>Visualization Mode</label>
                    <select id="tensor-mode">
                        <option value="trajectory">Brand Trajectory</option>
                        <option value="surface">Consensus Surface</option>
                        <option value="clusters">Model Clusters</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Animation Speed</label>
                    <input type="range" id="animation-speed" min="1" max="10" value="5">
                </div>
                <button onclick="toggleAnimation()">Play/Pause</button>
            </div>
            <div id="tensor-3d"></div>
        </div>

        <!-- Neural Pattern Detection -->
        <div class="viz-section">
            <h2>Neural Pattern Detection</h2>
            <div id="pattern-viz"></div>
            <div class="controls">
                <button onclick="detectPatterns()">Detect Patterns</button>
            </div>
            <div id="detected-patterns"></div>
        </div>
    </div>

    <script>
        // Initialize visualizations
        let animationRunning = false;
        let currentFrame = 0;

        // Memory Decay Visualization
        function createDecayCurve() {
            const svg = d3.select("#memory-decay-viz")
                .append("svg")
                .attr("width", "100%")
                .attr("height", "100%")
                .attr("viewBox", "0 0 800 400");

            const margin = {top: 20, right: 80, bottom: 50, left: 50};
            const width = 800 - margin.left - margin.right;
            const height = 400 - margin.top - margin.bottom;

            const g = svg.append("g")
                .attr("transform", `translate(${margin.left},${margin.top})`);

            // Scales
            const xScale = d3.scaleLog()
                .domain([1, 365])
                .range([0, width]);

            const yScale = d3.scaleLinear()
                .domain([0, 100])
                .range([height, 0]);

            // Axes
            g.append("g")
                .attr("transform", `translate(0,${height})`)
                .call(d3.axisBottom(xScale).tickFormat(d => d + "d"))
                .style("color", "#888");

            g.append("g")
                .call(d3.axisLeft(yScale))
                .style("color", "#888");

            // Axis labels
            g.append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 0 - margin.left)
                .attr("x", 0 - (height / 2))
                .attr("dy", "1em")
                .style("text-anchor", "middle")
                .style("fill", "#00ff88")
                .text("Memory Score");

            g.append("text")
                .attr("transform", `translate(${width / 2}, ${height + margin.bottom})`)
                .style("text-anchor", "middle")
                .style("fill", "#00ff88")
                .text("Time (days)");

            return {svg, g, xScale, yScale, width, height};
        }

        function updateDecayCurve() {
            const initialScore = document.getElementById('initial-score').value;
            document.getElementById('initial-score-value').textContent = initialScore;
            
            const decayType = document.getElementById('decay-type').value;
            
            d3.select("#memory-decay-viz").selectAll("*").remove();
            const {svg, g, xScale, yScale, width, height} = createDecayCurve();

            const decayFunctions = {
                exponential: (t, halfLife) => initialScore * Math.exp(-t / halfLife),
                'multi-exponential': (t) => {
                    return initialScore * (
                        0.3 * Math.exp(-t / 1) +    // Viral component
                        0.4 * Math.exp(-t / 7) +    // News component
                        0.3 * Math.exp(-t / 90)     // Brand component
                    );
                },
                'power-law': (t, alpha = 0.5) => initialScore / Math.pow(1 + t, alpha)
            };

            const decayTypes = [
                {name: "Viral", halfLife: 1, color: "#ff6b6b"},
                {name: "News", halfLife: 7, color: "#4ecdc4"},
                {name: "Brand", halfLife: 90, color: "#45b7d1"},
                {name: "Reputation", halfLife: 365, color: "#96ceb4"}
            ];

            if (decayType === 'multi-exponential') {
                const data = d3.range(1, 365, 0.5);
                const line = d3.line()
                    .x(d => xScale(d))
                    .y(d => yScale(decayFunctions[decayType](d)))
                    .curve(d3.curveMonotoneX);

                g.append("path")
                    .datum(data)
                    .attr("fill", "none")
                    .attr("stroke", "#00ff88")
                    .attr("stroke-width", 3)
                    .attr("d", line);
            } else {
                decayTypes.forEach(type => {
                    const data = d3.range(1, 365, 0.5);
                    const line = d3.line()
                        .x(d => xScale(d))
                        .y(d => yScale(decayFunctions[decayType](d, type.halfLife)))
                        .curve(d3.curveMonotoneX);

                    g.append("path")
                        .datum(data)
                        .attr("fill", "none")
                        .attr("stroke", type.color)
                        .attr("stroke-width", 2)
                        .attr("d", line)
                        .attr("opacity", 0)
                        .transition()
                        .duration(1000)
                        .attr("opacity", 1);
                });
            }
        }

        // LLM Consensus Matrix
        function updateConsensusMatrix() {
            const models = [
                'GPT-4', 'Claude-3', 'Gemini', 'DeepSeek', 'Mistral',
                'Llama-3', 'Grok', 'Cohere', 'AI21', 'Perplexity', 'Together'
            ];

            // Generate synthetic consensus data
            const data = [];
            for (let i = 0; i < models.length; i++) {
                for (let j = 0; j < models.length; j++) {
                    const value = i === j ? 1.0 : 0.5 + Math.random() * 0.5;
                    data.push({
                        x: models[i],
                        y: models[j],
                        value: value
                    });
                }
            }

            // Create heatmap
            const heatmapData = [{
                x: models,
                y: models,
                z: models.map((_, i) => 
                    models.map((_, j) => {
                        const idx = i * models.length + j;
                        return data[idx].value;
                    })
                ),
                type: 'heatmap',
                colorscale: [
                    [0, '#0a0a0a'],
                    [0.5, '#2a2a2a'],
                    [1, '#00ff88']
                ],
                showscale: true
            }];

            const layout = {
                title: {
                    text: 'Model Agreement Matrix',
                    font: { color: '#00ff88' }
                },
                paper_bgcolor: '#0a0a0a',
                plot_bgcolor: '#0a0a0a',
                font: { color: '#888' },
                xaxis: { 
                    side: 'bottom',
                    tickangle: -45
                },
                yaxis: { 
                    autorange: 'reversed'
                }
            };

            Plotly.newPlot('consensus-heatmap', heatmapData, layout, {responsive: true});

            // Update metrics
            const avgConsensus = data.reduce((sum, d) => sum + d.value, 0) / data.length;
            document.getElementById('consensus-score').textContent = avgConsensus.toFixed(3);
            
            const agreementLevel = avgConsensus > 0.8 ? 'Strong' : 
                                  avgConsensus > 0.6 ? 'Moderate' : 
                                  avgConsensus > 0.4 ? 'Weak' : 'Conflicted';
            document.getElementById('agreement-level').textContent = agreementLevel;
        }

        // 3D Time Tensor
        function create3DTensor() {
            const mode = document.getElementById('tensor-mode').value;
            
            if (mode === 'trajectory') {
                createBrandTrajectory();
            } else if (mode === 'surface') {
                createConsensusSurface();
            } else {
                createModelClusters();
            }
        }

        function createBrandTrajectory() {
            // Generate synthetic trajectory data
            const t = d3.range(0, 100, 1);
            const trajectory = t.map(i => ({
                x: Math.cos(i * 0.1) * (1 + 0.1 * Math.sin(i * 0.05)),
                y: Math.sin(i * 0.1) * (1 + 0.1 * Math.cos(i * 0.05)),
                z: i / 20 + 0.2 * Math.sin(i * 0.2)
            }));

            const trace = {
                x: trajectory.map(d => d.x),
                y: trajectory.map(d => d.y),
                z: trajectory.map(d => d.z),
                mode: 'lines+markers',
                marker: {
                    size: 4,
                    color: trajectory.map((_, i) => i),
                    colorscale: 'Viridis',
                    showscale: true
                },
                line: {
                    width: 4,
                    color: '#00ff88'
                },
                type: 'scatter3d'
            };

            const layout = {
                title: 'Brand Perception Trajectory',
                scene: {
                    xaxis: {title: 'Innovation', color: '#888'},
                    yaxis: {title: 'Trust', color: '#888'},
                    zaxis: {title: 'Time', color: '#888'},
                    bgcolor: '#0a0a0a'
                },
                paper_bgcolor: '#0a0a0a',
                font: { color: '#00ff88' }
            };

            Plotly.newPlot('tensor-3d', [trace], layout, {responsive: true});
        }

        function createConsensusSurface() {
            // Generate synthetic surface data
            const size = 50;
            const x = d3.range(size);
            const y = d3.range(size);
            const z = [];

            for (let i = 0; i < size; i++) {
                z[i] = [];
                for (let j = 0; j < size; j++) {
                    z[i][j] = Math.sin(i * 0.2) * Math.cos(j * 0.2) + 
                             0.5 * Math.sin(i * 0.1 + j * 0.1);
                }
            }

            const data = [{
                z: z,
                type: 'surface',
                colorscale: [
                    [0, '#0a0a0a'],
                    [0.5, '#00ff88'],
                    [1, '#ffffff']
                ],
                contours: {
                    z: {
                        show: true,
                        usecolormap: true,
                        highlightcolor: "#00ff88",
                        project: {z: true}
                    }
                }
            }];

            const layout = {
                title: 'Consensus Surface Over Time',
                scene: {
                    xaxis: {title: 'Time (days)', color: '#888'},
                    yaxis: {title: 'Model Dimension', color: '#888'},
                    zaxis: {title: 'Consensus Score', color: '#888'},
                    bgcolor: '#0a0a0a',
                    camera: {
                        eye: {x: 1.5, y: 1.5, z: 1.5}
                    }
                },
                paper_bgcolor: '#0a0a0a',
                font: { color: '#00ff88' }
            };

            Plotly.newPlot('tensor-3d', data, layout, {responsive: true});
        }

        function createModelClusters() {
            // Generate synthetic cluster data
            const clusters = [
                {name: 'Technical', center: [1, 0, 0], color: '#ff6b6b'},
                {name: 'Creative', center: [-1, 0, 0], color: '#4ecdc4'},
                {name: 'Analytical', center: [0, 1, 0], color: '#45b7d1'},
                {name: 'Conversational', center: [0, -1, 0], color: '#96ceb4'}
            ];

            const traces = clusters.map(cluster => {
                const points = d3.range(20).map(() => ({
                    x: cluster.center[0] + (Math.random() - 0.5) * 0.5,
                    y: cluster.center[1] + (Math.random() - 0.5) * 0.5,
                    z: cluster.center[2] + (Math.random() - 0.5) * 0.5
                }));

                return {
                    x: points.map(p => p.x),
                    y: points.map(p => p.y),
                    z: points.map(p => p.z),
                    mode: 'markers',
                    marker: {
                        size: 8,
                        color: cluster.color,
                        opacity: 0.8
                    },
                    name: cluster.name,
                    type: 'scatter3d'
                };
            });

            const layout = {
                title: 'LLM Model Clusters',
                scene: {
                    xaxis: {title: 'Technical-Creative', color: '#888'},
                    yaxis: {title: 'Analytical-Conversational', color: '#888'},
                    zaxis: {title: 'Consensus Strength', color: '#888'},
                    bgcolor: '#0a0a0a'
                },
                paper_bgcolor: '#0a0a0a',
                font: { color: '#00ff88' },
                showlegend: true
            };

            Plotly.newPlot('tensor-3d', traces, layout, {responsive: true});
        }

        function toggleAnimation() {
            animationRunning = !animationRunning;
            if (animationRunning) {
                animateTensor();
            }
        }

        function animateTensor() {
            if (!animationRunning) return;
            
            currentFrame = (currentFrame + 1) % 100;
            const speed = document.getElementById('animation-speed').value;
            
            // Update visualization based on current frame
            // This would update the 3D plot with new data
            
            setTimeout(() => animateTensor(), 1000 / speed);
        }

        // Neural Pattern Detection
        function detectPatterns() {
            const patterns = [
                { type: 'Convergence', strength: 0.85, models: ['GPT-4', 'Claude-3', 'Gemini'] },
                { type: 'Divergence', strength: 0.72, models: ['DeepSeek', 'Mistral', 'Llama-3'] },
                { type: 'Oscillation', strength: 0.68, models: ['Grok', 'Cohere'] },
                { type: 'Trend Shift', strength: 0.91, models: ['All Models'] }
            ];

            const patternHtml = patterns.map(p => `
                <div class="metric-card">
                    <div>${p.type}</div>
                    <div class="metric-value">${(p.strength * 100).toFixed(0)}%</div>
                    <div style="font-size: 12px; color: #888;">${p.models.join(', ')}</div>
                </div>
            `).join('');

            document.getElementById('detected-patterns').innerHTML = patternHtml;
        }

        // Initialize on load
        window.onload = function() {
            updateDecayCurve();
            updateConsensusMatrix();
            create3DTensor();
        };

        // Update tensor when mode changes
        document.getElementById('tensor-mode').addEventListener('change', create3DTensor);
    </script>
</body>
</html>